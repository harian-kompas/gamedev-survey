google.load("visualization","1",{packages:["corechart"]}),google.load("maps","3",{other_params:"sensor=false"}),$(document).ready(function(){if(console.info("We're currently not hiring. But, are you interested in having fun with the dark side of data visualization? Fork this project: https://github.com/harian-kompas/gamedev-survey"),Array.prototype.contains=function(a){var c,b=this.length;for(c=0;b>c;c++)if(this[c]===a)return!0;return!1},Array.prototype.distinctSingleDimension=function(){var b,a=[],c=this.length;for(b=0;c>b;b++)a.indexOf(this[b])<0&&a.push(this[b]);return a},String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},$("#btn-add-personnels").length&&$("#btn-add-personnels").click(function(a){if(a.preventDefault(),$("#team-members").length){var b=$("<div></div>"),c=$("<div></div>"),d=$("<div></div>"),e=$("<div></div>"),f=$("<select></select>"),g=$("<div></div>"),h=$("<select></select>"),i=$("<a></a>");b.addClass("col-md-6"),c.addClass("col-md-5"),d.addClass("col-md-1"),e.addClass("form-group"),f.addClass("form-control"),f.attr("name","personnels[number][]"),g.addClass("form-group"),h.addClass("form-control"),h.attr("name","personnels[edu][]"),i.addClass("btn btn-danger"),i.text("X"),e.append(f),g.append(h),b.append(e),c.append(g),d.append(i),$("#team-members").append(b,c,d),$.getJSON("index.php?p=api&sp=akademik",function(a){var b,e,c=$(document.createDocumentFragment()),d=$(document.createDocumentFragment());for(b=1;30>=b;b++)e=$("<option></option>"),e.attr("value",b),e.text(b+" orang"),c.append(e);f.append(c),$.each(a,function(){var a=$("<option></option>");a.attr("value",this.key),a.text("lulus "+this.value),d.append(a)}),h.append(d)}),i.one("click",function(a){a.preventDefault(),b.remove(),c.remove(),d.remove()})}}),$("#btn-add-products").length){var a=1;$("#btn-add-products").click(function(b){if(b.preventDefault(),$("#products").length){var u,v,c=new Date,d=c.getFullYear(),e=d-15,f=$("<div></div>"),g=$("<div></div>"),h=$("<div></div>"),i=$("<div></div>"),j=$("<div></div>"),k=$("<div></div>"),l=$("<input></input>"),m=$("<div></div>"),n=$("<select></select>"),o=$(document.createDocumentFragment()),p=$("<div></div>"),q=$(document.createDocumentFragment()),r=$("<div></div>"),s=$("<a></a>"),t=["desktop","mobile"];for(f.addClass("row"),g.addClass("col-md-4"),h.addClass("col-md-3"),i.addClass("col-md-4"),j.addClass("col-md-1"),k.addClass("form-group"),l.addClass("form-control"),l.attr("type","text"),l.attr("placeholder","Judul karya"),l.attr("maxlength",255),l.attr("name","products[name][]"),m.addClass("form-group"),n.addClass("form-control"),n.attr("name","products[year][]"),u=e;d>=u;u++)v=$("<option></option>"),v.attr("value",u),v.text(u),o.append(v);n.append(o),p.addClass("form-group"),r.addClass("checkbox"),$.each(t,function(){var b=$("<label></label>"),c=$("<input></input>");b.addClass("checkbox-inline"),c.attr("type","checkbox"),c.attr("value",this),c.attr("name","products[platform]["+a+"][]"),b.append(c).append(document.createTextNode(this.ucfirst())),q.append(b)}),r.append(q),s.addClass("btn btn-danger"),s.text("X"),k.append(l),m.append(n),p.append(r),g.append(k),h.append(m),i.append(p),j.append(s),f.append(g,h,i,j),$("#products").append(f),s.one("click",function(a){a.preventDefault(),g.remove(),h.remove(),i.remove(),j.remove(),f.remove()}),a++}})}$("#btn-submit").length&&$("#btn-submit").click(function(a){a.preventDefault();var b=$("#txt-studio-name").val().trim(),c=$("#txt-studio-location").val().trim(),d=$("#txt-studio-products").val().trim(),e=$('input[name^="publications"]'),f=0,g=!0;if(g){if(""===b)return void $("#txt-studio-name").parent().addClass("has-error");if($("#txt-studio-name").parent().removeClass("has-error"),""===c)return void $("#txt-studio-location").parent().addClass("has-error");if($("#txt-studio-location").parent().removeClass("has-error"),""===d)return void $("#txt-studio-products").parent().addClass("has-error");if($("#txt-studio-products").parent().removeClass("has-error"),$.each(e,function(){$(this).checked&&f++}),!(f>0))return void $('input[name^="publications"]').parent().parent().addClass("has-error");$('input[name^="publications"]').parent().parent().removeClass("has-error")}$("#the-survey").submit()}),$.getJSON("index.php?p=api&t="+Date.now(),function(a){var b,c,d,e,f;b=function(){var d,b=[["Pendidikan","Pekerja"]],c={total:0,degree:[]},e=new google.visualization.PieChart(document.getElementById("edu-degree")),f={is3D:!0,legend:{position:"bottom"},slices:{0:{offset:.2},3:{offset:.4}}};$("#edu-degree").width($("#edu-degree").width()).height(Math.floor(9/16*$("#edu-degree").width())),$.each(["SD","SMP","SMA/SMK","D-1","D-2","D-3","D-4","S-1","S-2","S-3"],function(a,b){var d={name:b,total:0};c.degree.push(d)}),$.each(a,function(){var a=this,b=a.studio.personnels.education;c.total+=parseInt(a.studio.personnels.total,10),$.each(b,function(){var a=this.degree,b=this.num;$.each(c.degree,function(){a===this.name&&(this.total+=b)})})}),$.each(c.degree,function(){b.push([this.name,this.total])}),d=google.visualization.arrayToDataTable(b),e.draw(d,f)},d=function(){var b,c=[],d=function(a,b){var g,c=$(document.createDocumentFragment()),d=b.length,e=[],f=4;for($("#studios-this-year").empty(),$("#studios-this-year").parent().find("h3").text("Studio yang Muncul pada Tahun "+a),b.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0}),g=0;d>g;g+=f)e.push(b.slice(g,g+f));$.each(e,function(){var a=this,b=$("<div></div>"),d=$(document.createDocumentFragment());$.each(a,function(){var a=$("<div></div>"),b=$("<table></table>"),c=$("<thead></thead>"),e=$("<tr></tr>"),f=$("<th></th>"),g=$("<tbody></tbody>"),h=$("<tr></tr>"),i=$("<td></td>"),j=$("<td></td>"),k=$("<tr></tr>"),l=$("<td></td>"),m=$("<td></td>"),n="",o=this.products;$.each(o,function(){n+=this.name+" ("+this.year+", "+this.platform+"); "}),a.addClass("col-md-3"),b.addClass("table table-stripped"),f.attr("colspan",2),f.text(this.name),e.append(f),c.append(e),i.text("Lokasi"),j.text(this.location.name),h.append(i,j),l.text("Produk"),m.text(n.trim().substring(0,n.trim().length-1)),k.append(l,m),g.append(h,k),b.append(c,g),a.append(b),d.append(a)}),b.addClass("row"),b.append(d),c.append(b)}),$("#studios-this-year").append(c)},e=function(b){var f,g,h,j,c=[],e={lat:-.789275,lng:113.921327},i=[],k={gridSize:30},l=[{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry",stylers:[{visibility:"on"},{color:"#e3e3e3"}]},{featureType:"landscape.natural",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{color:"#cccccc"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"transit.station.airport",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"transit.station.airport",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#FFFFFF"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]}],m=[];$.each(a,function(){this.studio.yearStart<=b&&c.push({lat:this.studio.location.latitude,lng:this.studio.location.longitude,locationName:this.studio.location.name}),this.studio.yearStart===b&&m.push(this.studio)}),$("#map").empty(),g={center:e,disableDefaultUI:!0,styles:l,zoom:5},f=new google.maps.Map(document.getElementById("map"),g),$.each(c,function(){h=new google.maps.Marker({position:{lat:this.lat,lng:this.lng},map:f}),i.push(h)}),j=new MarkerClusterer(f,i,k),d(b,m)},f=function(a){var b=$(document.createDocumentFragment()),c=function(a){a.on("click",function(a){a.preventDefault();var b=$(this);$(".map-nav-links").each(function(){b.text()===$(this).text()?$(this).parent().addClass("active"):$(this).parent().removeClass("active")}),e(parseInt(b.text(),10))})};$.each(a,function(a,d){var e=$("<li></li>"),f=$("<a></a>");0===a?e.addClass("map-nav-items active"):e.addClass("map-nav-items"),f.addClass("map-nav-links").attr("href","#").text(d),e.append(f),b.append(e),c(f)}),$("#map-nav").append(b)};$.each(a,function(){c.push(this.studio.yearStart)}),b=c.sort().distinctSingleDimension(),f(b),e(b[0])},e=function(){var c,d,f,j,k,m,b=[["Tahun","Desktop","Mobile"]],e=[],g=2e3,h=new Date,i=h.getFullYear(),l=new google.visualization.ColumnChart(document.getElementById("game-publications")),n={legend:{position:"in"},isStacked:!0};for($("#game-publications").width($("#game-publications").width()).height(Math.floor(9/16*$("#game-publications").width())),$.each(a,function(){var a=this.studio.products;$.each(a,function(){e.push(this)})}),f=e.length,j=g;i>=j;j++){for(c=0,d=0,k=0;f>k;k++)j===e[k].year&&("desktop"===e[k].platform?c++:"mobile"===e[k].platform&&d++);(c>0||d>0)&&b.push([j.toString(),c,d])}m=google.visualization.arrayToDataTable(b),l.draw(m,n)},f=function(){var f,g,j,k,l,b=[["Kategori","Jumlah Studio"]],c=[{min:1,max:3},{min:4,max:7},{min:8,max:10},{min:11,max:20},{min:21,max:50},{min:51,max:9999999}],d=c.length,e=a.length,h=0,i=0,m=new google.visualization.PieChart(document.getElementById("num-studios")),n={is3D:!0,legend:{position:"right"}};for(f=0;d>f;f++){for(h=c[f].min,i=c[f].max,j=0,k=f===d-1?"> 50 pekerja":h+"-"+i+" pekerja",g=0;e>g;g++)a[g].studio.personnels.total>=h&&a[g].studio.personnels.total<=i&&j++;j>0&&b.push([k,j])}$("#num-studios").width($("#num-studios").width()).height(Math.floor(9/16*$("#num-studios").width())),l=google.visualization.arrayToDataTable(b),m.draw(l,n)},c=function(){d(),f(),b(),e()},$("#map").length&&google.setOnLoadCallback(c)})});