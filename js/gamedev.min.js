function drawCharts(){drawDistributionMap(),drawAcademicChart(),drawGamePerYearChart()}function drawAcademicChart(){$.getJSON("index.php?p=api&sp=curang&t="+Date.now(),function(a){var d,b=a.summaries.personnels.degree,c=[["Pendidikan","Pekerja"]],e=new google.visualization.PieChart(document.getElementById("edu-degree")),f={chartArea:{height:"100%",width:"100%"},is3D:!0};$.each(b,function(a,b){c.push([b.name,b.total])}),d=google.visualization.arrayToDataTable(c),e.draw(d,f)})}function drawDistributionMap(){$.getJSON("index.php?p=api&sp=curang&t="+Date.now(),function(a){function c(){var c=$(document.createDocumentFragment()),d=function(b){var d,g,h,c=a.summaries.studioDistributionsPerYear,e=new google.visualization.Map(document.getElementById("map")),f=[["Lat","Long"]];$.each(c,function(a,c){c.year===b&&(d=c.location)}),$.each(d,function(a,b){f.push([parseFloat(b.lat),parseFloat(b.lng)])}),h=google.visualization.arrayToDataTable(f),e.draw(h,g)},e=function(a){a.preventDefault();var b=$(this),c=$(".map-nav-links");$.each(c,function(a,c){b.text()===$(c).text()?($(c).parent().addClass("active"),d(parseInt(b.text(),10))):$(c).parent().removeClass("active")})};$.each(b,function(a,b){var d=$("<li></li>"),f=$("<a></a>"),g=0===a?" active":"";d.addClass("map-nav-items"+g),f.text(b),f.addClass("map-nav-links"),f.attr("href","#"),d.append(f),c.append(d),f.on("click",e)}),$("#map-nav").append(c),d(parseInt(b[0],10))}var b=a.summaries.distinctStudioStartYears;c()})}function drawGamePerYearChart(){$.getJSON("index.php?p=api&sp=curang&t="+Date.now(),function(a){var d,i,j,k,l,b=a.surveyResultDetails,c=[],e=new Date,f=e.getFullYear(),g=2e3,h=[["Tahun","Desktop","Mobile"]];for($.each(b,function(a,b){var d=b.studio.products;$.each(d,function(a,b){c.push(b)})}),d=c.length,i=g;f>=i;i++){for(k=0,l=0,j=0;d>j;j++)c[j].year===i&&("desktop"===c[j].platform?k++:"mobile"===c[j].platform&&l++);(k>0||l>0)&&h.push([i.toString(),k,l])}var m=new google.visualization.ColumnChart(document.getElementById("game-publications")),n={chartArea:{isStacked:!1,legend:{position:"right"}}},o=google.visualization.arrayToDataTable(h);m.draw(o,n),console.log(h)})}$(document).ready(function(){if(console.info("We meet again, at last. The circle is now complete. Interested in having fun with the dark side of data visualization? Stalk me at https://id.linkedin.com/in/yudhawijaya"),Array.prototype.contains=function(a){var c,b=this.length;for(c=0;b>c;c++)if(this[c]===a)return!0;return!1},String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)},$("#btn-add-personnels").length&&$("#btn-add-personnels").click(function(a){if(a.preventDefault(),$("#team-members").length){var b=$("<div></div>"),c=$("<div></div>"),d=$("<div></div>"),e=$("<div></div>"),f=$("<select></select>"),g=$("<div></div>"),h=$("<select></select>"),i=$("<a></a>");b.addClass("col-md-6"),c.addClass("col-md-5"),d.addClass("col-md-1"),e.addClass("form-group"),f.addClass("form-control"),f.attr("name","personnels[number][]"),g.addClass("form-group"),h.addClass("form-control"),h.attr("name","personnels[edu][]"),i.addClass("btn btn-danger"),i.text("X"),e.append(f),g.append(h),b.append(e),c.append(g),d.append(i),$("#team-members").append(b,c,d),$.getJSON("index.php?p=api&sp=akademik",function(a){var b,c=$(document.createDocumentFragment()),d=$(document.createDocumentFragment());for(b=1;20>=b;b++){var e=$("<option></option>");e.attr("value",b),e.text(b+" orang"),c.append(e)}f.append(c),$.each(a,function(a,b){var c=$("<option></option>");c.attr("value",b.key),c.text("lulus "+b.value),d.append(c)}),h.append(d)}),i.one("click",function(a){a.preventDefault(),b.remove(),c.remove(),d.remove()})}}),$("#btn-add-products").length){var a=1;$("#btn-add-products").click(function(b){if(b.preventDefault(),$("#products").length){var u,c=new Date,d=c.getFullYear(),e=d-15,f=$("<div></div>"),g=$("<div></div>"),h=$("<div></div>"),i=$("<div></div>"),j=$("<div></div>"),k=$("<div></div>"),l=$("<input></input>"),m=$("<div></div>"),n=$("<select></select>"),o=$(document.createDocumentFragment()),p=$("<div></div>"),q=$(document.createDocumentFragment()),r=$("<div></div>"),s=$("<a></a>"),t=["desktop","mobile"];for(f.addClass("row"),g.addClass("col-md-4"),h.addClass("col-md-3"),i.addClass("col-md-4"),j.addClass("col-md-1"),k.addClass("form-group"),l.addClass("form-control"),l.attr("type","text"),l.attr("placeholder","Judul karya"),l.attr("maxlength",255),l.attr("name","products[name][]"),m.addClass("form-group"),n.addClass("form-control"),n.attr("name","products[year][]"),u=e;d>=u;u++){var v=$("<option></option>");v.attr("value",u),v.text(u),o.append(v)}n.append(o),p.addClass("form-group"),r.addClass("checkbox"),$.each(t,function(b,c){var d=$("<label></label>"),e=$("<input></input>");d.addClass("checkbox-inline"),e.attr("type","checkbox"),e.attr("value",c),e.attr("name","products[platform]["+a+"][]"),d.append(e).append(document.createTextNode(c.ucfirst())),q.append(d)}),r.append(q),s.addClass("btn btn-danger"),s.text("X"),k.append(l),m.append(n),p.append(r),g.append(k),h.append(m),i.append(p),j.append(s),f.append(g,h,i,j),$("#products").append(f),s.one("click",function(a){a.preventDefault(),g.remove(),h.remove(),i.remove(),j.remove(),f.remove()}),a++}})}$("#btn-submit").length&&$("#btn-submit").click(function(a){a.preventDefault();var b=$("#txt-studio-name").val().trim(),c=$("#txt-studio-location").val().trim(),d=$("#txt-studio-products").val().trim(),e=$('input[name^="publications"]'),f=0,g=!1;if(g){if(""===b)return $("#txt-studio-name").parent().addClass("has-error"),void 0;if($("#txt-studio-name").parent().removeClass("has-error"),""===c)return $("#txt-studio-location").parent().addClass("has-error"),void 0;if($("#txt-studio-location").parent().removeClass("has-error"),""===d)return $("#txt-studio-products").parent().addClass("has-error"),void 0;if($("#txt-studio-products").parent().removeClass("has-error"),$.each(e,function(a,b){b.checked&&f++}),0===f)return $('input[name^="publications"]').parent().parent().addClass("has-error"),void 0;$('input[name^="publications"]').parent().parent().removeClass("has-error")}$("#the-survey").submit()})}),$("#map").length&&(google.load("visualization","1",{packages:["corechart","map"]}),google.setOnLoadCallback(drawCharts));